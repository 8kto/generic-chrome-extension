<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../../shared/styles/reset.css" />
    <link rel="stylesheet" href="../../shared/styles/variables.css" />
    <link rel="stylesheet" href="../../shared/styles/common.css" />
    <link rel="stylesheet" href="../../shared/styles/tabs.css" />
    <link rel="stylesheet" href="./styles.css" />

    <script src="../../shared/js/tabs.js"></script>
    <script src="../../service/Optimizely.js"></script>
    <script src="../../service/Template.js"></script>
  </head>
  <body>
    <div class="componentWrapper">
      <h1 class="componentTitle">Optimizely experiments 🦔</h1>

      <!-- Tabs -->
      <div class="tab">
        <button class="tabTitle active button" data-target="experiments-list">
          📜 List
        </button>
        <button class="tabTitle button" data-target="experiments-json">
          ⚙️ JSON
        </button>
        <button class="tabTitle button" data-target="experiments-docs">
          👓️ Docs
        </button>
      </div>

      <div id="messages">
        <div class="message message--info">Loading...</div>
      </div>

      <!-- Tabs content -->
      <!-- Experiments list -->
      <div id="experiments-list" class="tabContent active">
        <div id="container"></div>

        <input
          id="reset-feature-flags-cookie"
          class="button"
          type="button"
          value="Reset feature flags"
        />
        <input
          id="reload-tab"
          class="button"
          title="Click to reload page and fetch updated feature flags"
          type="button"
          value="🔄 Apply"
          hidden
        />
      </div>

      <!-- Experiments JSON -->
      <div id="experiments-json" class="tabContent">
        <p class="message">You can edit raw feature flags JSON here.</p>
        <textarea
          class="form-control--textarea"
          id="experiments-json-container"
          cols="36"
          rows="20"
        ></textarea>
        <input
          id="save-json"
          class="button"
          title="Click to reload page and fetch updated feature flags"
          type="button"
          value="🔄 Apply"
          hidden
        />
      </div>

      <!-- Docs -->
      <div id="experiments-docs" class="tabContent">
        <p class="message">
          <strong>Important</strong>: Feature flags cookie doesn't contain all the possible variations names,
          so the extension tries to guess it instead and display 3 possible options +
          <code>default</code> one.
        </p>
        <p class="message">
          Old names started with the <code>variation_N</code> prefix (e.g. variation_1, variation_2),<br>
          new conventions use <code>vN</code> (e.g. v1, v2)
        </p>
        <p class="message">Find out more at these URLs:</p>
        <ul>
          <li>
            <a
              href="https://github.com/RedTecLab/igel-chrome-sa-optimizely-tool"
              >Igel: Chrome extension repository</a
            >
          </li>
          <li>
            <a
              href="https://github.com/RedTecLab/fock/blob/master/docs/08_Optimizely.md"
              >Optimizely in Fock</a
            >
          </li>
        </ul>
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
